define(["dom","emby-select"],function(dom){"use strict";function onVersionChange(e){var value=this.value;value&&ApiClient.getJSON(ApiClient.getUrl("System/ReleaseNotes",{Version:value})).then(function(releaseNotes){dom.parentWithClass(e.target,"page").querySelector(".releaseNotes").innerHTML=releaseNotes.description})}return function(view,params){ApiClient.getJSON(ApiClient.getUrl("System/ReleaseNotes/Versions")).then(function(versions){var selectVersion=view.querySelector("#selectVersion"),currentVersion=params.version||"";selectVersion.innerHTML=versions.map(function(v){return"<option"+(v.versionStr===currentVersion?" selected":"")+' value="'+v.versionStr+'">'+v.name+"</option>"}).join(""),function(select){select.dispatchEvent(new CustomEvent("change",{}))}(selectVersion)}),view.querySelector("#selectVersion").addEventListener("change",onVersionChange)}});
define(["layoutManager","browser","actionsheet","css!./emby-select"],function(layoutManager,browser,actionsheet){"use strict";function enableNativeMenu(){return!(!browser.edgeUwp&&!browser.xboxOne)||!(browser.tizen||browser.orsay||browser.web0s||browser.netcast)&&(!!browser.tv||!layoutManager.tv)}function showActionSheet(select){var labelElem=getLabel(select),title=labelElem?labelElem.textContent||labelElem.innerText:null;actionsheet.show({items:select.options,positionTo:select,title:title}).then(function(value){!function(select,value){select.value=value}(select,value),function(select){var evt=document.createEvent("HTMLEvents");evt.initEvent("change",!0,!0),select.dispatchEvent(evt)}(select)})}function getLabel(select){for(var elem=select.previousSibling;elem&&"LABEL"!==elem.tagName;)elem=elem.previousSibling;return elem}function onFocus(e){var label=getLabel(this);label&&label.classList.add("selectLabelFocused")}function onBlur(e){var label=getLabel(this);label&&label.classList.remove("selectLabelFocused")}function onMouseDown(e){e.button||enableNativeMenu()||(e.preventDefault(),showActionSheet(this))}function onKeyDown(e){switch(e.keyCode){case 13:return void(enableNativeMenu()||(e.preventDefault(),showActionSheet(this)));case 37:case 38:case 39:case 40:return void(layoutManager.tv&&e.preventDefault())}}var inputId=0;function onInit(){this.hasInit||(this.hasInit=!0,this.id||(this.id="embyselect"+inputId,inputId++),browser.firefox||(this.classList.add("emby-select-withcolor"),layoutManager.tv&&this.classList.add("emby-select-tv-withcolor")),(browser.android||browser.edge)&&this.classList.add("nobackdropfilter"),layoutManager.tv&&(this.classList.add("emby-select-focusscale"),this.classList.add("emby-select-tv"),this.classList.contains("emby-select-inline")&&this.classList.add("emby-select-tv-inline")),this.addEventListener("mousedown",onMouseDown),this.addEventListener("keydown",onKeyDown),this.addEventListener("focus",onFocus),this.addEventListener("blur",onBlur))}function _connectedCallback(){if(!this.classList.contains("emby-select")){this.classList.add("emby-select");var label=this.ownerDocument.createElement("label");label.innerHTML=this.getAttribute("label")||"";var arrowContainerClass="selectArrowContainer";this.classList.contains("emby-select-inline")&&(label.classList.add("selectLabel-inline"),arrowContainerClass+=" selectArrowContainer-inline"),label.classList.add("selectLabel"),label.htmlFor=this.id,this.parentNode.insertBefore(label,this),this.classList.contains("emby-select-withcolor")&&this.parentNode.insertAdjacentHTML("beforeend",'<div class="'+arrowContainerClass+'"><div style="visibility:hidden;">0</div><i class="selectArrow md-icon">&#xE313;</i></div>')}}function _setLabel(text){this.parentNode.querySelector("label").innerHTML=text}if(window.customElements){var EmbySelect=function(_HTMLSelectElement){function EmbySelect(){var _this;babelHelpers.classCallCheck(this,EmbySelect);var self=_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(EmbySelect).call(this));return onInit.call(self),babelHelpers.possibleConstructorReturn(_this,self)}return babelHelpers.inherits(EmbySelect,_HTMLSelectElement),babelHelpers.createClass(EmbySelect,[{key:"connectedCallback",value:function(){onInit.call(this),_connectedCallback.call(this)}},{key:"setLabel",value:function(){_setLabel.apply(this,arguments)}}]),EmbySelect}(babelHelpers.wrapNativeSuper(HTMLSelectElement));customElements.define("emby-select",EmbySelect,{extends:"select"})}else if(document.registerElement){var EmbySelectPrototype=Object.create(HTMLSelectElement.prototype);EmbySelectPrototype.createdCallback=onInit,EmbySelectPrototype.attachedCallback=_connectedCallback,EmbySelectPrototype.setLabel=_setLabel,document.registerElement("emby-select",{prototype:EmbySelectPrototype,extends:"select"})}});
define(["connectionManager","listView","cardBuilder","imageLoader","globalize","emby-itemscontainer","emby-linkbutton"],function(connectionManager,listView,cardBuilder,imageLoader,globalize){"use strict";function renderSection(page,item,element,type){switch(type){case"Program":loadItems(element,item,type,{IncludeItemTypes:"Program",Limit:12,SortBy:"StartDate"},{shape:"autooverflow",showTitle:!0,centerText:!0,overlayMoreButton:!0,preferThumb:!0,overlayText:!1,showAirTime:!0,showAirDateTime:!0,showChannelName:!0});break;case"Movie":loadItems(element,item,type,{IncludeItemTypes:"Movie",Limit:12,SortBy:"SortName"},{shape:"autooverflow",showTitle:!0,centerText:!0,overlayMoreButton:!0,overlayText:!1,showYear:!0});break;case"Video":loadItems(element,item,type,{IncludeItemTypes:"Video",Limit:12,SortBy:"SortName"},{shape:"autooverflow",showTitle:!0,centerText:!0,overlayMoreButton:!0,overlayText:!1,showYear:!0});break;case"MusicVideo":loadItems(element,item,type,{IncludeItemTypes:"MusicVideo",Limit:12,SortBy:"SortName"},{shape:"autooverflow",showTitle:!0,centerText:!0,overlayPlayButton:!0});break;case"Game":loadItems(element,item,type,{IncludeItemTypes:"Game",Limit:12,SortBy:"SortName"},{shape:"autooverflow",showTitle:!0,centerText:!0,overlayMoreButton:!0});break;case"Trailer":loadItems(element,item,type,{IncludeItemTypes:"Trailer",Limit:12,SortBy:"SortName"},{shape:"autooverflow",showTitle:!0,centerText:!0,overlayPlayButton:!0});break;case"Series":loadItems(element,item,type,{IncludeItemTypes:"Series",Limit:12,SortBy:"SortName"},{shape:"autooverflow",showTitle:!0,centerText:!0,overlayMoreButton:!0});break;case"MusicAlbum":loadItems(element,item,type,{IncludeItemTypes:"MusicAlbum",Limit:12,SortBy:"ProductionYear,SortName",SortOrder:"Descending,Ascending"},{shape:"autooverflow",playFromHere:!0,showTitle:!0,showYear:!0,centerText:!0,overlayPlayButton:!0});break;case"MusicArtist":loadItems(element,item,type,{IncludeItemTypes:"MusicArtist",Limit:8,SortBy:"SortName"},{shape:"autooverflow",playFromHere:!0,showTitle:!0,showParentTitle:!0,centerText:!0,overlayPlayButton:!0});break;case"Episode":loadItems(element,item,type,{IncludeItemTypes:"Episode",Limit:6,SortBy:"SeriesSortName,SortName"},{shape:"autooverflow",showTitle:!0,showParentTitle:!0,centerText:!0,overlayPlayButton:!0});break;case"Audio":loadItems(element,item,type,{IncludeItemTypes:"Audio",SortBy:"AlbumArtist,Album,SortName"},{playFromHere:!0,action:"playallfromhere",smallIcon:!0,artist:!0})}}function loadItems(element,item,type,query,listOptions){(query=getQuery(query,item)).EnableTotalRecordCount=!1,function(options,item){var query=getQuery(options,item);return function(index,limit,fields){query.StartIndex=index,query.Limit=limit,fields&&(query.Fields+=","+fields);var apiClient=connectionManager.getApiClient(item.ServerId);return"MusicArtist"===query.IncludeItemTypes?(query.IncludeItemTypes=null,apiClient.getAlbumArtists(apiClient.getCurrentUserId(),query)):apiClient.getItems(apiClient.getCurrentUserId(),query)}}(query,item)(query.StartIndex,query.Limit,query.Fields).then(function(result){var html="";result.Items.length?element.classList.remove("hide"):element.classList.add("hide"),listOptions.items=result.Items;var itemsContainer=element.querySelector(".itemsContainer");"Audio"===type?(html=listView.getListViewHtml(listOptions),itemsContainer.classList.add("vertical-list")):(html=cardBuilder.getCardsHtml(listOptions),itemsContainer.classList.remove("vertical-list")),itemsContainer.innerHTML=html,imageLoader.lazyChildren(itemsContainer)})}function getQuery(options,item){var query={SortOrder:"Ascending",IncludeItemTypes:"",Recursive:!0,Fields:"AudioInfo,SeriesInfo,ParentId,PrimaryImageAspectRatio,BasicSyncInfo,ProductionYear",Limit:100,StartIndex:0,CollapseBoxSetItems:!1};return function(query,item){"Person"===item.Type?query.PersonIds=item.Id:"Genre"===item.Type?query.GenreIds=item.Id:"MusicGenre"===item.Type?query.GenreIds=item.Id:"GameGenre"===item.Type?query.GenreIds=item.Id:"Studio"===item.Type?query.StudioIds=item.Id:"MusicArtist"===item.Type&&("MusicAlbum"===query.IncludeItemTypes?query.AlbumArtistIds=item.Id:query.ArtistIds=item.Id)}(query=Object.assign(query,options||{}),item),query}window.ItemsByName={renderItems:function(page,item){var sections=[];"Person"===item.Type?(sections.push({name:globalize.translate("HeaderUpcomingOnTV"),type:"Program"}),sections.push({name:globalize.translate("TabMovies"),type:"Movie"}),sections.push({name:globalize.translate("TabShows"),type:"Series"}),sections.push({name:globalize.translate("TabEpisodes"),type:"Episode"}),sections.push({name:globalize.translate("TabTrailers"),type:"Trailer"}),sections.push({name:globalize.translate("Videos"),type:"Video"})):"MusicArtist"===item.Type&&(sections.push({name:globalize.translate("TabAlbums"),type:"MusicAlbum"}),sections.push({name:globalize.translate("TabMusicVideos"),type:"MusicVideo"}));var elem=page.querySelector("#childrenContent");elem.innerHTML=sections.map(function(section){var html="";return"Audio"===section.type?html+='<div class="verticalSection verticalSection-extrabottompadding" data-type="'+section.type+'">':html+='<div class="verticalSection hide" data-type="'+section.type+'">',html+='<div class="sectionTitleContainer sectionTitleContainer-cards padded-left">',html+='<a is="emby-linkbutton" href="'+function(item,type){return"Genre"!==item.Type?"MusicGenre"!==item.Type?"GameGenre"!==item.Type?"Studio"!==item.Type?"MusicArtist"!==item.Type?"Person"!==item.Type?"list/list.html?type="+type+"&parentId="+item.Id+"&serverId="+item.ServerId:"list/list.html?type="+type+"&personId="+item.Id+"&serverId="+item.ServerId:"list/list.html?type="+type+"&artistId="+item.Id+"&serverId="+item.ServerId:"list/list.html?type="+type+"&studioId="+item.Id+"&serverId="+item.ServerId:"list/list.html?type="+type+"&gameGenreId="+item.Id+"&serverId="+item.ServerId:"list/list.html?type="+type+"&musicGenreId="+item.Id+"&serverId="+item.ServerId:"list/list.html?type="+type+"&genreId="+item.Id+"&serverId="+item.ServerId}(item,section.type)+'" class="button-flat button-flat-mini sectionTitleTextButton">',html+='<h2 class="sectionTitle sectionTitle-cards">',html+=section.name,html+='<i class="md-icon">&#xE5CC;</i></h2>',html+="</a>",html+="</div>",html+='<div is="emby-scroller" class="emby-scroller" data-mousewheel="false" data-centerfocus="true" data-horizontal="true">',html+='<div class="scrollerframe padded-top-focusscale padded-bottom-focusscale">',html+='<div is="emby-itemscontainer" class="scrollSlider focuscontainer-x itemsContainer padded-left padded-right"></div>',html+="</div>",html+="</div>",html+="</div>"}).join("");for(var sectionElems=elem.querySelectorAll(".verticalSection"),i=0,length=sectionElems.length;i<length;i++)renderSection(page,item,sectionElems[i],sectionElems[i].getAttribute("data-type"))}}});
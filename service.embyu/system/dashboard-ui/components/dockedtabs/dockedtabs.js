define(["layoutManager","appFooter-shared","viewManager","apphost","connectionManager","events","globalize","browser","require","dom","appRouter","emby-tabs"],function(layoutManager,appFooter,viewManager,appHost,connectionManager,events,globalize,browser,require,dom,appRouter){"use strict";var instance;require(["css!./dockedtabs"]);var hiddenMode=0,serverMode=1,libraryMode=2,currentMode=hiddenMode;function setMode(mode){if(mode!==currentMode){var tabs=instance;if(tabs){currentMode=mode;var elem=tabs.element;mode===serverMode?(setTabs([{name:globalize.translate("Home"),icon:"&#xE88A;",href:"home.html"},{name:globalize.translate("Dashboard"),active:!0,icon:"&#xE871;",href:"dashboard.html"},{name:globalize.translate("Users"),icon:"&#xE7FB;",href:"users/users.html"},{name:globalize.translate("Library"),icon:"&#xE2C7;",href:"library.html"},{name:globalize.translate("More"),icon:"&#xE5D2;",href:"servermenu/servermenu.html"}]),elem.classList.add("dockedtabs-servertabs")):mode===libraryMode?(setTabs([{name:globalize.translate("Home"),icon:"&#xE88A;",href:"home.html"},{name:globalize.translate("LiveTV"),icon:"&#xE7FB;",href:"users/users.html"},{name:globalize.translate("Downloads"),active:!0,icon:"&#xE871;",href:"dashboard.html"},{name:globalize.translate("Library"),icon:"&#xE2C7;",href:"library.html"},{name:globalize.translate("More"),icon:"&#xE5D2;",href:"servermenu/servermenu.html"}]),elem.classList.remove("dockedtabs-servertabs")):mode!==hiddenMode&&elem.classList.remove("dockedtabs-servertabs"),mode===hiddenMode?tabs.hide():tabs.show()}}}function setTabs(tabs){var html='<div is="emby-tabs" class="dockedtabs-tabs" data-selectionbar="false">';html+=tabs.map(function(tab,index){var active=tab.active?" emby-tab-button-active":"";return'<a is="emby-linkbutton" href="'+tab.href+'" class="dockedtabs-tab-button emby-tab-button'+active+'" data-index="'+index+'">                <div class="dockedtabs-tab-button-foreground emby-button-foreground"><i class="dockedtabs-tab-button-icon md-icon">'+tab.icon+"</i><div>"+tab.name+"</div></div></a>"}).join(""),html+="</div>",instance.element.innerHTML=html}function onViewShow(e){var view=e.target;layoutManager.mobile&&view.classList.contains("type-interior")?setMode(serverMode):setMode(hiddenMode)}function DockedTabs(options){var self=this;(instance=self).element=function(){var elem=document.createElement("div");return elem.classList.add("hide"),elem.classList.add("dockedtabs"),elem.classList.add("dockedtabs-bottom"),elem.innerHTML="",appFooter.add(elem),elem}(),events.on(connectionManager,"localusersignedin",function(e){onViewShow({target:viewManager.currentView()})}),events.on(connectionManager,"localusersignedout",function(){self.hide()}),document.addEventListener("viewshow",onViewShow)}return DockedTabs.prototype.destroy=function(){document.removeEventListener("viewshow",onViewShow);this.element;this.element=null},DockedTabs.prototype.show=function(){this.element.classList.remove("hide")},DockedTabs.prototype.hide=function(){this.element.classList.add("hide")},new DockedTabs({}),DockedTabs});